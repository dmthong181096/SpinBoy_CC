window.__require=function e(t,n,s){function i(r,c){if(!n[r]){if(!t[r]){var a=r.split("/");if(a=a[a.length-1],!t[a]){var l="function"==typeof __require&&__require;if(!c&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+r+"'")}}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){return i(t[r][1][e]||e)},u,u.exports,e,t,n,s)}return n[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<s.length;r++)i(s[r]);return i}({1:[function(e,t,n){function s(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function r(e){return"object"==typeof e&&null!==e}function c(e){return void 0===e}t.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0,s.defaultMaxListeners=10,s.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},s.prototype.emit=function(e){var t,n,s,o,a,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(c(n=this._events[e]))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(r(n))for(o=Array.prototype.slice.call(arguments,1),s=(l=n.slice()).length,a=0;a<s;a++)l[a].apply(this,o);return!0},s.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,r(this._events[e])&&!this._events[e].warned&&(n=c(this._maxListeners)?s.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},s.prototype.on=s.prototype.addListener,s.prototype.once=function(e,t){if(!i(t))throw TypeError("listener must be a function");var n=!1;function s(){this.removeListener(e,s),n||(n=!0,t.apply(this,arguments))}return s.listener=t,this.on(e,s),this},s.prototype.removeListener=function(e,t){var n,s,o,c;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(n=this._events[e]).length,s=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(n)){for(c=o;c-- >0;)if(n[c]===t||n[c].listener&&n[c].listener===t){s=c;break}if(s<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},s.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},s.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},s.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},s.listenerCount=function(e,t){return e.listenerCount(t)}},{}],Audio:[function(e,t,n){"use strict";cc._RF.push(t,"663abaTZitBqowhdSN/juso","Audio");var s=e("mEmitter"),i=e("Variables");cc.Class({extends:cc.Component,properties:{audioBoom:cc.AudioClip},onLoad:function(){s.instance.emit(i.transAudio,this)},start:function(){},audioBoomExplosion:function(){cc.audioEngine.play(this.audioBoom,!1,1)},audioBackground:function(){cc.audioEngine.play(this.audioBackground,!1,1)},onDestroy:function(){}}),cc._RF.pop()},{Variables:"Variables",mEmitter:"mEmitter"}],Controller:[function(e,t,n){"use strict";cc._RF.push(t,"757b48IZlNCx4Y880mzwNp8","Controller");var s=e("mEmitter"),i=e("Variables");cc.Class({extends:cc.Component,properties:{boom:cc.Node,resultBoard:e("ResultBoard")},onLoad:function(){s.instance=new s,s.instance.registerEvent(i.transBoss,this.transBoss,this),s.instance.registerEvent(i.transPlayer,this.transPlayer,this),s.instance.registerEvent(i.transAudio,this.transAudio,this),s.instance.registerEvent(i.transScore,this.transScore,this),cc.director.getCollisionManager().enabled=!0},transScore:function(e){i.score=e},transBoss:function(e){i.boss=e},transPlayer:function(e){i.player=e},transAudio:function(e){i.audio=e},transBullet:function(e){i.bullet=e},start:function(){this.resultBoard.node.active=!1,s.instance.emit(i.transBackGround,this),i.boss.anim(),i.player.portal(i.portal,!1),s.instance.registerEvent(i.transBullet,this.transBullet,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},onDestroy:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},onKeyDown:function(e){switch(e.keyCode){case cc.macro.KEY.left:1==i.isCompleted&&i.player.back(i.run,!0);break;case cc.macro.KEY.right:1==i.isCompleted&&i.player.run(i.run,!0);break;case cc.macro.KEY.up:1==i.isCompleted&&(i.player.jump(i.jump,!0),i.isCompleted=!1);break;case cc.macro.KEY.space:1==i.isStart&&i.player.shoot(i.shoot,!1)}},updateScore:function(){var e=this;this.score=100;var t=[cc.callFunc(function(){e.checkScore()}),cc.delayTime(1),cc.callFunc(function(){i.score.scoreGame.string="<color=#CD5555>SCORE:</c> <color=#FFCC33> "+e.score+"</color>"})];i.score.scoreGame.node.runAction(cc.repeat(cc.sequence(t),100))},checkScore:function(){this.score-=1,this.score<0&&i.player.showResult(!1)},update:function(e){}}),cc._RF.pop()},{ResultBoard:"ResultBoard",Variables:"Variables",mEmitter:"mEmitter"}],PlayAgain:[function(e,t,n){"use strict";cc._RF.push(t,"938b2uf5y9MuYL17U7eXkyG","PlayAgain"),cc.Class({extends:cc.Component,properties:{},playAgain:function(){cc.director.loadScene("SpineBoy")},start:function(){}}),cc._RF.pop()},{}],Player:[function(e,t,n){"use strict";cc._RF.push(t,"68a91jCVg1E1IwXpoSNb/j7","Player");var s=e("mEmitter"),i=e("Variables");cc.Class({extends:cc.Component,properties:{spineBoy:sp.Skeleton,bullet:cc.Prefab},onLoad:function(){s.instance.emit(i.transPlayer,this),s.instance.registerEvent(i.transBackGround,this.transBackGround,this),this.spineBoy.setMix(i.jump,i.idle,.2)},onEnable:function(){},onCollisionEnter:function(e){"boom"!=e.node.name&&"boss"!=e.node.name&&"Stone"!=e.node.name||this.showResult(!1),"Princess"==e.node.name&&this.showResult()},start:function(){},transBackGround:function(e){i.background=e},createBullet:function(){var e=cc.instantiate(this.bullet);e.parent=i.background.node;var t=[this.spineBoy.node.scaleX>0?cc.flipX(!1):cc.flipX(!0),this.spineBoy.node.scaleX>0?cc.moveBy(1,1500,0):cc.moveBy(1,-1500,0),cc.callFunc(function(){e.destroy()})];e.x=this.spineBoy.node.scaleX>0?this.spineBoy.node.x+100:this.spineBoy.node.x-100,e.y=this.spineBoy.node.y+50,e.runAction(cc.sequence(t)),s.instance.emit(i.transBullet,e)},shoot:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.spineBoy.setAnimation(0,e,t),this.createBullet()},portal:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.spineBoy.setAnimation(0,e,t),this.spineBoy.setCompleteListener(function(){i.isCompleted=!0,i.isStart=!0,i.background.updateScore()})},back:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.spineBoy.setAnimation(0,e,t);var n=[cc.flipX(!0),cc.moveBy(1,-180,0)];this.spineBoy.node.runAction(cc.sequence(n))},run:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.spineBoy.setAnimation(0,e,t);var n=[cc.flipX(!1),cc.moveBy(1,180,0),cc.callFunc(function(){})];this.spineBoy.node.runAction(cc.sequence(n)),this.removeEffect()},jump:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.spineBoy.setAnimation(0,e,t);var n=this.spineBoy.node.scaleX>0?cc.jumpBy(1,250,0,200,1):cc.jumpBy(1,-250,0,200,1);this.spineBoy.node.runAction(cc.sequence(n,cc.callFunc(function(){i.isCompleted=!0}))),this.removeEffect()},showResult:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];i.isCompleted=!1,i.isStart=!1,this.spineBoy.clearTracks(),this.stopAllActions(),this.score=i.background.score+1,t?(this.spineBoy.setAnimation(0,i.hoverboard,!1),this.spineBoy.setCompleteListener(function(){i.background.resultBoard.node.active=!0,i.background.node.opacity=150,i.background.resultBoard.win(e.score)})):(this.spineBoy.setAnimation(0,i.death,!1),this.spineBoy.setCompleteListener(function(){i.background.resultBoard.node.active=!0,i.background.node.opacity=150,i.background.resultBoard.lose(e.score)}))},stopAllActions:function(){this.node.stopAllActions(),i.score.node.stopAllActions(),i.boss.node.stopAllActions()},removeEffect:function(){var e=this;this.spineBoy.setCompleteListener(function(){e.spineBoy.clearTracks(),e.spineBoy.setToSetupPose()})}}),cc._RF.pop()},{Variables:"Variables",mEmitter:"mEmitter"}],ResultBoard:[function(e,t,n){"use strict";cc._RF.push(t,"a1718N1+npKi4+G3ioxDp8D","ResultBoard");e("mEmitter");cc.Class({extends:cc.Component,properties:{textResult:cc.RichText},lose:function(e){this.textResult.string="<color=#00ff00>YOU </c><color=#0fffff>LOSE</color>\n<color=#CD5555>SCORE:</c> <color=#FFCC33>"+e+"</color>"},win:function(e){this.textResult.string="<color=#00ff00>YOU </c><color=#0fffff>WIN</color>\n<color=#CD5555>SCORE:</c> <color=#FFCC33>"+e+"</color>"},onLoad:function(){},start:function(){}}),cc._RF.pop()},{mEmitter:"mEmitter"}],Score:[function(e,t,n){"use strict";cc._RF.push(t,"73413Ix2fdI1IsnCQiHc4pb","Score");var s=e("mEmitter"),i=e("Variables");cc.Class({extends:cc.Component,properties:{scoreGame:cc.RichText},onLoad:function(){s.instance.emit(i.transScore,this)},start:function(){}}),cc._RF.pop()},{Variables:"Variables",mEmitter:"mEmitter"}],Variables:[function(e,t,n){"use strict";cc._RF.push(t,"6b4feAA1LhN7ZYirlnM3k20","Variables");t.exports={run:"run",idle:"idle",jump:"jump",death:"death",hoverboard:"hoverboard",portal:"portal",shoot:"idle",boss:null,bullet:null,background:null,resultBoard:null,player:null,audio:null,isCompleted:!1,isStart:!1,score:null,transBoss:"transBoss",transPlayer:"transPlayer",transAudio:"transAudio",transScore:"transScore",transBackGround:"transBackGround",transBullet:"transBullet",transStone:"transStone"},cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],boss:[function(e,t,n){"use strict";cc._RF.push(t,"705dauV/xJGSqmJrOEFMPJ+","boss");var s=e("mEmitter"),i=e("Variables");cc.Class({extends:cc.Component,properties:{stone:cc.Prefab,hp:cc.ProgressBar},onLoad:function(){s.instance.emit(i.transBoss,this),this.hp.node.y+=50,this.hp.progress=1},onCollisionEnter:function(e){this.hp.progress<=.1||"Bullet"==e.node.name&&(this.hp.progress-=.1,e.node.destroy(),this.hp.progress<=.1&&this.death())},anim:function(){var e=this,t=[cc.jumpBy(2,cc.v2(150,0),50,4),cc.flipX(!0),cc.jumpBy(2,cc.v2(-150,0),50,4),cc.callFunc(function(){e.createStone()}),cc.flipX(!1)];this.node.runAction(cc.repeatForever(cc.sequence(t)))},createStone:function(){var e=cc.instantiate(this.stone);e.parent=i.background.node;var t=[cc.moveTo(1.5,i.player.node.x,i.player.node.y).easing(cc.easeCubicActionIn()),cc.blink(.3,3),cc.callFunc(function(){e.destroy()})];e.x=this.node.x-80,e.y=this.node.y+80,e.runAction(cc.sequence(t)),s.instance.emit(i.transStone,e)},death:function(){var e=this;this.node.stopAllActions();var t=[cc.rotateBy(1,90),cc.blink(.5,3),cc.fadeOut(.3),cc.callFunc(function(){e.node.active=!1})];this.node.runAction(cc.sequence(t))},start:function(){}}),cc._RF.pop()},{Variables:"Variables",mEmitter:"mEmitter"}],mEmitter:[function(e,t,n){"use strict";cc._RF.push(t,"04535Q4GFlF4bHC1mRNe+rC","mEmitter");var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=e("events"),r=function(){function e(){i(this,e),this._emiter=new o,this._emiter.setMaxListeners(100)}return s(e,[{key:"emit",value:function(){var e;(e=this._emiter).emit.apply(e,arguments)}},{key:"registerEvent",value:function(e,t){this._emiter.on(e,t)}},{key:"registerOnce",value:function(e,t){this._emiter.once(e,t)}},{key:"removeEvent",value:function(e,t){this._emiter.removeListener(e,t)}},{key:"destroy",value:function(){this._emiter.removeAllListeners(),this._emiter=null,e.instance=null}}]),e}();r.instance=null,t.exports=r,cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{events:1}]},{},["Audio","Controller","PlayAgain","Player","ResultBoard","Score","Variables","boss","mEmitter"]);